<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Test</title>
    </head>
    <body>
        <script src="//code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
        <script type="text/javascript">

            let journeyInterval = null,
                isPaused = false;

            const Journey = {}

            Journey.journeyParts = [];

            navigator.geolocation.getCurrentPosition(function(position){
                //
            });

            function addJourneyPart() {

                let journeyPart = {};
                journeyPart.dateTime = new Date();

                navigator.geolocation.getCurrentPosition(function(position){
                    journeyPart.latitude = position.coords.latitude;
                    journeyPart.longitude = position.coords.longitude;

                    Journey.journeyParts.push(journeyPart);

                    $('#journeyParts').append("<li><b>" + journeyPart.dateTime + "</b> " + journeyPart.latitude + ", " + journeyPart.longitude + "</li>");
                });
            }

            function startJourney() {
                Journey.startTime = new Date();
                $('#startTime').html(Journey.startTime);
                isRecording = true;
                journeyInterval = setInterval(function(){
                    if(isPaused) return;
                        addJourneyPart();
                        updateTimer();
                }, 1000);
            }

            function updateTimer() {
                let endTime = new Date();
                let diff = moment.duration(moment(endTime).diff(Journey.startTime));
                $('#timer').html([diff.hours(), diff.minutes(), diff.seconds()].join(':'))
            }

            function stopJourney() {
                clearInterval(journeyInterval);
                Journey.endTime = new Date();
                $('#endTime').html(Journey.endTime);
            }

            function pauseJourney() {
                isPaused = true;
            }

            function continueJourney() {
                isPaused = false;
            }

            $(document).on('click', '#start', function(e) {
                e.preventDefault();
                $('#start').hide();
                $('#stop, #pause').show();
                startJourney();
            });

            $(document).on('click', '#stop', function(e) {
                e.preventDefault();
                $('#start, #stop, #pause, #continue').hide();
                stopJourney();
            });

            $(document).on('click', '#pause', function(e) {
                e.preventDefault();
                pauseJourney();
                $('#pause').hide();
                $('#continue').show();
            });

            $(document).on('click', '#continue', function(e) {
                e.preventDefault();
                continueJourney();
                $('#pause').show();
                $('#continue').hide();
            });

        </script>

        <button id="start">Start</button>
        <button id="pause" style="display: none;">Pause</button>
        <button id="continue" style="display: none;">Continue</button>
        <button id="stop" style="display: none;">Stop</button>

        <div id="timer"></div>

        <p>Start Time: <span id="startTime"></span></p>
        <p>End Time: <span id="endTime"></span></p>

        <ul id="journeyParts"></ul>
    </body>
</html>